import http from 'http';
import { getBoundIp } from '../lib/util';
import { init, setupServer } from './webui/lib';
export function initBiz(proxy, callback) {
    const config = proxy.config;
    init(proxy);
    if (config.customUIPort) {
        const server = http.createServer();
        setupServer(server);
        getBoundIp(config.uihost, function (host) {
            if (host) {
                server.listen(config.uiport, host, callback);
            }
            else {
                server.listen(config.uiport, callback);
            }
        });
    }
    else {
        callback();
    }
}
