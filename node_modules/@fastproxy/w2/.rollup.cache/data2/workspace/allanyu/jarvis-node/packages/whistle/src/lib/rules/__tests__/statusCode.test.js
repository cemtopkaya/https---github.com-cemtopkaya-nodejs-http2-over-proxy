import { describe, expect, test } from 'vitest';
import { request } from '../../../__tests__/utils';
describe('statusCode', () => {
    test('ok', async () => {
        const r1 = await request({
            url: 'http://statuscode1.testx.whistlejs.com/index.html?resBody=',
            method: 'POST',
            body: 'xxxxxxxxxxxx'
        });
        expect(r1.res.statusCode).toBe(999);
        const r2 = await request('http://statuscode3.testx.whistlejs.com/index.html?resBody=');
        expect(r2.res.statusCode).toBe(500);
        try {
            await request({
                url: 'http://statuscode4.test.whistlejs.com/index.html?resBody=',
                method: 'POST',
                body: 'xxxxxxxxxxxx'
            });
        }
        catch (err) {
            expect(err).not.toBeUndefined();
        }
        try {
            await request('https://statuscode5.test.whistlejs.com/index.html?resBody=');
        }
        catch (err) {
            expect(err).not.toBeUndefined();
        }
    });
});
