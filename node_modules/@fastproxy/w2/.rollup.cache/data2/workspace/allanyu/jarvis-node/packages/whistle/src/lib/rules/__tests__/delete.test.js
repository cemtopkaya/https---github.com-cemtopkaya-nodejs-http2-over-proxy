import { describe, expect, test } from 'vitest';
import { request } from '../../../__tests__/utils';
describe('delete', () => {
    test('ok', async () => {
        const r1 = await request('http://delete.test.whistlejs.com/index.html?get11');
        expect(r1.data.headers).not.toHaveProperty('x-delete-all');
        expect(r1.data.headers).not.toHaveProperty('x-delete-req');
        expect(r1.res.headers).not.toHaveProperty('x-delete-res');
        const r2 = await request({
            method: 'post',
            headers: {
                'x-delete-test': 123
            },
            url: 'http://delete.test.whistlejs.com/index.html?post11'
        });
        expect(r2.data.headers).toHaveProperty('x-delete-test');
        expect(r2.data.headers).not.toHaveProperty('x-delete-all');
        expect(r2.data.headers).not.toHaveProperty('x-delete-req');
        expect(r2.res.headers).not.toHaveProperty('x-delete-res');
        const r3 = await request('http://delete1.test.whistlejs.com/index.html?get');
        expect(r3.data.headers).toHaveProperty('x-delete-all');
        expect(r3.data.headers).toHaveProperty('x-delete-req');
        expect(r3.res.headers).toHaveProperty('x-delete-res');
        const r4 = await request({
            method: 'post',
            headers: {
                'x-delete-test': 123
            },
            url: 'http://delete1.test.whistlejs.com/index.html?post'
        });
        expect(r4.data.headers).toHaveProperty('x-delete-test');
        expect(r4.data.headers).toHaveProperty('x-delete-all');
        expect(r4.data.headers).toHaveProperty('x-delete-req');
        expect(r4.res.headers).toHaveProperty('x-delete-res');
    });
});
