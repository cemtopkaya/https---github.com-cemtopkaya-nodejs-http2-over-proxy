import { describe, expect, test } from 'vitest';
import { request } from '../../../__tests__/utils';
describe('tunnelPolicy', () => {
    test('ok', async () => {
        const r1 = await request('https://tp.w2.org/index.html');
        expect(r1.data.ruleValue).toBe('global');
        expect(r1.res.headers['content-type']).toBe('text/html');
        const r2 = await request({
            method: 'post',
            url: 'https://tp.w2.org/index.html',
            isTunnel: true
        });
        expect(r2.data.body).toBe('test');
        expect(r2.res.headers['content-type']).not.toBe('text/html');
    });
});
