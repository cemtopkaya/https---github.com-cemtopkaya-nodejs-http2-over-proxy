import { describe, expect, test } from 'vitest';
import { request } from '../../../__tests__/utils';
describe('rawfile', () => {
    test('ok', async () => {
        const r1 = await request('http://raw.test.whistlejs.com/index.html?doNotParseJson');
        expect(r1.res.statusCode).toBe(500);
        expect(r1.data).toBe('test');
        expect(r1.res.headers).toHaveProperty('content-type', 'text/plain');
        const r2 = await request({
            method: 'post',
            url: 'https://raw.test.whistlejs.com/?doNotParseJson'
        });
        expect(r2.res.statusCode).toBe(500);
        expect(r2.data).toBe('test');
        expect(r2.res.headers).toHaveProperty('content-type', 'text/plain');
        const r3 = await request('http://xraw.test.whistlejs.com/index2.html');
        expect(r3.data).toHaveProperty('type', 'server');
        const r4 = await request('http://rwf.w2.org/index.html?doNotParseJson');
        expect(r4.res.statusCode).toBe(500);
        expect(r4.data).toBe('test2');
    });
});
