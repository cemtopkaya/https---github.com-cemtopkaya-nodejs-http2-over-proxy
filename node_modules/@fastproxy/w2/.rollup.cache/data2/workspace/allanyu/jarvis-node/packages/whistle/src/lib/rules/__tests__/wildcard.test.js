import { describe, expect, test } from 'vitest';
import { request } from '../../../__tests__/utils';
describe('wildcard', () => {
    test('ok', async () => {
        const r1 = await request('https://wildcard.cn/abc/index.html');
        expect(r1.data.name).toBe('http');
        const r2 = await request('https://www.qq.wildcard.cn/abc/index.html');
        expect(r2.data.name).toBe('https');
        const r3 = await request({
            url: 'http://www.qq.wildcard1.cn/abc/index.html',
            method: 'post',
            body: 'sssssss'
        });
        expect(r3.data.name).toBe('https');
        const r4 = await request('http://www.wildcard1.com/abc/index.html');
        expect(r4.data.name).toBe('https');
        const r5 = await request({
            url: 'https://w2.w1.wildcard1.com/abc/index.html',
            method: 'post',
            body: 'sssssss'
        });
        expect(r5.data.name).toBe('http');
        const r6 = await request({
            url: 'http://www.qq.wildcard3.cn/abc/index.html',
            method: 'post',
            body: 'sssssss'
        });
        expect(r6.data.name).toBe('https');
        const r7 = await request('http://www.wildcard3.com/abc/index.html');
        expect(r7.data.name).toBe('https');
        const r8 = await request({
            url: 'http://w2.w1.wildcard3.com/abc/index.html',
            method: 'post',
            body: 'sssssss'
        });
        expect(r8.data.name).toBe('http');
        const r9 = await request('http://www.wildcard2.com/1/2/3/abc/index.html');
        expect(r9.data.name).toBe('http');
        const r10 = await request({
            url: 'http://w2.w1.wildcard2.com/1/2/3/abc/index.html',
            method: 'post',
            body: 'sssssss'
        });
        expect(r10.data.name).toBe('http');
        const r11 = await request('http://www.wildcard2.com/1/2/3/abc/index.html');
        expect(r11.data.name).toBe('http');
        const r12 = await request({
            url: 'http://w2.w1.wildcard2.com/1/2/3/abc/index.html',
            method: 'post',
            body: 'sssssss'
        });
        expect(r12.data.name).toBe('http');
        const r13 = await request('https://www.wildcard2.com/abc/index.html');
        expect(r13.data.name).toBe('https');
        const r14 = await request({
            url: 'https://w2.w1.wildcard2.com/abc/index.html',
            method: 'post',
            body: 'sssssss'
        });
        expect(r14.data.name).toBe('https');
        const r15 = await request('https://test.wildcard5.com/abc/index.html');
        expect(r15.data.list[10]).toBe('a\rb\nc');
        expect(r15.data.list[20]).toBe(123);
        expect(r15.data.list[30]).toBe('123');
        expect(r15.data.list[40].a).toBe('123');
        const r16 = await request('https://test.wildcard5.com/wildcard5/_____/abc/index.html?test=123');
        expect(r16.data.list[10]).toBe('a\rb\nc');
        expect(r16.data.list[20]).toBe(123);
        expect(r16.data.list[30]).toBe('123');
        expect(r16.data.list[40].a).toBe('123');
        expect(r16.data.ec).toBe('abc/index.html');
        const r17 = await request('https://w1.test.wildcard5.com/abc/index.html');
        expect(r17.data.list[10]).toBe('a\rb\nc');
        expect(r17.data.list[20]).toBe(123);
        expect(r17.data.list[30]).toBe('123');
        expect(r17.data.list[40].a).toBe('123');
        const r18 = await request({
            url: 'https://w2.w1.test.wildcard5.com/abc/index.html',
            method: 'post',
            body: 'sssssss'
        });
        expect(r18.data.list).toBeUndefined();
    });
});
