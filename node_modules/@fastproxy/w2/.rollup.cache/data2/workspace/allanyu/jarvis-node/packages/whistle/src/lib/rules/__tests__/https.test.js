import { describe, expect, test } from 'vitest';
import { request } from '../../../__tests__/utils';
import config from '../../../__tests__/config';
describe('https', () => {
    test('ok', async () => {
        const r1 = await request('https://127.0.0.1:8080/auto2http.html');
        expect(r1.data.url).toBe('/auto2http.html');
        const r2 = await request('https://https.w2.org/index.html');
        expect(r2.data.body).toBe('test');
        const r3 = await request('https://https1.w2.org:' + config.httpsPort + '/index.html');
        expect(r3.data.body).toBe('test');
        const r4 = await request('http://https1.w2.org:' + config.serverPort + '/index.html');
        expect(r4.data.type).toBe('server');
        const r5 = await request('https://https2.w2.org:' + config.httpsPort + '/index.html');
        expect(r5.data.body).toBe('test');
        const r6 = await request('http://https2.w2.org/index.html');
        expect(r6.data.type).toBe('server');
        const r7 = await request('https://https3.w2.org:5566/index.html');
        expect(r7.data.body).toBe('test');
    });
});
