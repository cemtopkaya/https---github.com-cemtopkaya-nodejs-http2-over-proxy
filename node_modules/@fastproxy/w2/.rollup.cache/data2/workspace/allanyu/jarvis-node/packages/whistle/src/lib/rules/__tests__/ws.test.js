import { describe, expect, test } from 'vitest';
import { request, requestWS } from '../../../__tests__/utils';
describe('ws', () => {
    test('ok', async () => {
        const r1 = await request('ws://test.whistlejs.com/index.html');
        expect(r1.host).toBe('127.0.0.1:8080');
        const r2 = await request('wss://ws1.test.whistlejs.com/index.html');
        expect(r2.host).toBe('127.0.0.1:9999');
        const r3 = await request('wss://test.whistlejs.com/ups.html?abc=123');
        //expect(r1.data.host).toBe('127.0.0.1:9999');
        const r4 = await request('wss://test.whistlejs.com/index2.html?abc=321');
        expect(r4.host).toBe('127.0.0.1:8080');
        const data1 = await requestWS('ws://test.whistlejs.com/index2.html?abc=321');
        expect(data1.host).toBe('127.0.0.1:8080');
        const data2 = await requestWS('ws://status.whistlejs.com/checkStatusCode.html');
        expect(data2).toBe('checkStatusCode');
    });
});
