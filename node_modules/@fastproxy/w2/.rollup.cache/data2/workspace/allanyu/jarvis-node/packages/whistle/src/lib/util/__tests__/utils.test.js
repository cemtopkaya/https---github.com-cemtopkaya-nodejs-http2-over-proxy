import { describe, expect, test } from 'vitest';
import parseUrl from '../parse-url';
const delims = ['<', '>', '"', '`', ' '];
const unwise = ['{', '}', '|', '\\', '^', '`'].concat(delims);
const autoEscape = ["'"].concat(unwise).join('');
describe('parseUrl', () => {
    test('case1', () => {
        const path = '/$%^{}?{{}}嗖嗖嗖' + autoEscape;
        const options = parseUrl('http://www.qq.com:8888' + path + '#hash' + autoEscape);
        expect(options.path).toBe(path);
        expect(options.port).toBe('8888');
        expect(options.host).toBe('www.qq.com:8888');
        expect(options.hostname).toBe('www.qq.com');
        expect(options.pathname).toBe(path.replace(/[\?#].*$/, ''));
        expect(options.protocol).toBe('http:');
    });
    test('case2', () => {
        const path = '/$%^{}?{{}}嗖嗖嗖' + autoEscape;
        const options = parseUrl('http://www.qq.com' + path + '#hash' + autoEscape);
        expect(options.path).toBe(path);
        expect(options.port + '').toBe('null');
        expect(options.host).toBe('www.qq.com');
        expect(options.hostname).toBe('www.qq.com');
        expect(options.pathname).toBe(path.replace(/[\?#].*$/, ''));
        expect(options.protocol).toBe('http:');
    });
});
