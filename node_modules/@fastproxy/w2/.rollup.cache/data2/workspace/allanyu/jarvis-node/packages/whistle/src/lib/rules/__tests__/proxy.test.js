import { describe, expect, test } from 'vitest';
import { request } from '../../../__tests__/utils';
describe('proxy', () => {
    test('ok', async () => {
        const r1 = await request('http://proxy.test.whistlejs.com/index.html');
        expect(r1.data).toHaveProperty('url', 'http://proxy.test.whistlejs.com/index.html');
        const r2 = await request({
            method: 'post',
            url: 'http://proxy.test.whistlejs.com/index.html',
            body: 'xxxxx'
        });
        expect(r2.data).toHaveProperty('url', 'http://proxy.test.whistlejs.com/index.html');
        const r3 = await request('ws://ws2.w2.org:8081/index.html');
        expect(r3.type).toBe('server');
        const r4 = await request('ws://ws3.w2.org:8081/index.html');
        expect(r4.type).toBe('server');
        const r5 = await request('ws://ws4.w2.org:8081/index.html');
        expect(r5.type).toBe('server');
        const r6 = await request('ws://ws5.w2.org:8081/index.html');
        expect(r6.type).toBe('server');
        const r7 = await request('http://127.0.0.1:8080/xproxy.html');
        expect(r7.data.type).toBe('server');
    });
});
