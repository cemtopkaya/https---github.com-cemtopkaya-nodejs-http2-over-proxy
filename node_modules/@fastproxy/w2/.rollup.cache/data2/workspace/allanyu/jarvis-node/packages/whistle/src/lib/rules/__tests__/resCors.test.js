import { describe, expect, test } from 'vitest';
import { request } from '../../../__tests__/utils';
describe('resCors', () => {
    test('ok by get', async () => {
        const r1 = await request('http://rescors.test.whistlejs.com/index.html');
        expect(r1.res.headers).toHaveProperty('access-control-max-age', '300000');
        expect(r1.res.headers).toHaveProperty('access-control-allow-credentials', 'true');
        expect(r1.res.headers).toHaveProperty('access-control-expose-headers', 'x-test');
        expect(r1.res.headers).toHaveProperty('access-control-allow-methods', 'POST');
        expect(r1.res.headers).toHaveProperty('access-control-allow-origin', '*');
    });
    test('ok by post', async () => {
        const r1 = await request({
            method: 'post',
            url: 'https://rescors.test.whistlejs.com/index.html'
        });
        expect(r1.res.headers).toHaveProperty('access-control-max-age', '300000');
        expect(r1.res.headers).toHaveProperty('access-control-allow-credentials', 'true');
        expect(r1.res.headers).toHaveProperty('access-control-expose-headers', 'x-test');
        expect(r1.res.headers).toHaveProperty('access-control-allow-methods', 'POST');
        expect(r1.res.headers).toHaveProperty('access-control-allow-origin', '*');
    });
});
