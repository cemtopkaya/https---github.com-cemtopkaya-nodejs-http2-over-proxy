"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("../../../../lib/rules/util");
function default_1(req, res) {
    const body = req.body;
    const name = body.name;
    const rulesText = body.rules || body.value;
    if (!rulesText || !name || typeof rulesText !== 'string') {
        if (body.enable == 1) {
            util_1.rules.select(name);
        }
        if (body.top == 1) {
            util_1.rules.moveToTop(name);
        }
        return res.json({ ec: 0, rules: !!util_1.rules.get(name) });
    }
    util_1.rules.add(name, rulesText);
    util_1.rules.select(name);
    util_1.rules.moveToTop(name);
    res.json({ ec: 0 });
}
exports.default = default_1;
