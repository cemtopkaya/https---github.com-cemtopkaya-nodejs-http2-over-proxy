"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lib_1 = require("../../../biz/webui/lib");
const emptyArr = [];
const parseArray = function (str) {
    try {
        str = JSON.parse(str);
        return Array.isArray(str) ? str : emptyArr;
    }
    catch (e) { }
    return emptyArr;
};
function default_1(req, res) {
    const reqList = parseArray(req.query.reqList);
    const resList = parseArray(req.query.resList);
    const result = {};
    reqList.concat(resList).forEach(function (id) {
        if (result[id] != null) {
            return;
        }
        const item = (0, lib_1.getProxy)().getItem(id);
        if (!item) {
            result[id] = 0;
            return;
        }
        if ((item.requestTime && reqList.indexOf(id) !== -1) || item.endTime) {
            result[id] = item;
        }
    });
    res.json(result);
}
exports.default = default_1;
