"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("../../../../lib/rules/util");
const LIMIMT_FILES_COUNT = util_1.values.LIMIMT_FILES_COUNT;
function default_1(req, res) {
    const files = util_1.values.getUploadFiles();
    const count = parseInt(req.body.count, 10) || 0;
    const len = files.length;
    const isMax = len >= LIMIMT_FILES_COUNT && count < LIMIMT_FILES_COUNT;
    const exists = util_1.values.existsFile(req.body.name);
    res.json({
        ec: 0,
        em: 'success',
        isMax: isMax,
        length: len,
        exists: exists,
        files: !isMax && exists ? undefined : files
    });
}
exports.default = default_1;
