"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.drain = void 0;
const stream_1 = require("stream");
const noop = function () { };
function drain(stream, endHandler) {
    if (stream._hasAlreadyDrain || (!stream.noReqBody && stream.useH2)) {
        return typeof endHandler === 'function' && endHandler();
    }
    stream._hasAlreadyDrain = true;
    const emitEndStream = new stream_1.PassThrough();
    emitEndStream.on('data', noop).on('error', noop);
    emitEndStream.on('end', endHandler);
    stream.pipe(emitEndStream);
}
exports.drain = drain;
