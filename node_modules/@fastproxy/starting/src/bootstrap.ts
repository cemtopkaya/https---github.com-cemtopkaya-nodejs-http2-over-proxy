import program from 'commander';
import {parseJSON, setSudoGid} from './util';

console.log('run bootstrap');
setSudoGid();

program.command('run <main>').action((main: any) => {
  console.log('bootstrap, main=', main);
  main = require(main);
  if (typeof (main.default || main) === 'function') {
    (main.default || main)(parseJSON(program.data, true));
  }
});

program.option('-d, --data [data]', 'data', String, null).parse(process.argv);
